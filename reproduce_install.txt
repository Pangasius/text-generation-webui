# for unstructured, deepspeed
sudo apt-get install libreoffice libaio-dev

# all torch dependent stuff
conda create -n ChatBot pytorch=2.1.1 torchvision torchaudio cudatoolkit transformers accelerate sentencepiece protobuf sentence-transformers optimum peft deepspeed -c pytorch -c nvidia -c conda-forge

# on conda but too much for it being done in one conda call (otherwise loads forever)
conda install mpi4py mpich pytesseract markdown datasets scipy colorama einops tensorboard wandb scikit-learn-intelex llama-index -c conda-forge

# the rest
pip install llama-hub pdf2docx "unstructured[all-docs]" nebula3-python exllamav2 gradio==3.37 auto-gptq torch_grammar psycopg2-binary pgvector asyncpg "sqlalchemy[asyncio]" greenlet nest-asyncio span_marker --upgrade-strategy only-if-needed --no-build-isolation

# fixes and bitsandbytes since it often doesn't work with conda install
pip install -U pip
pip install -U httpcore
pip install bitsandbytes --no-build-isolation